\documentclass[12pt, titlepage]{article}


% Author's up-front packages
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{longtable}

%Packages from template
\usepackage{amsmath, mathtools}
%\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr-hyper}
\usepackage{hyperref}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

% Author's packages

\usepackage{cite}
\usepackage{indentfirst}
\usepackage{csquotes}
\usepackage{cleveref}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\input{../../Comments}

\newcommand{\progname}{STEM Moir{\'e} GPA}
\externaldocument[SRS:]{../../SRS/SRS}
\externaldocument[TP:]{../../TestPlan/TestPlan}
\externaldocument[MG:]{../MG/MG}

%Set the custom referencing syste
	% Module
\newtheorem{M}{M}
\crefname{M}{M}{Ms}
	% Module Interface Specification
\newtheorem{MIS}{MIS}
\crefname{MIS}{MIS}{MISs}
	% Requirements
\newtheorem{R}{R}
\crefname{R}{R}{Rs}
	% Instance Model
\newtheorem{IM}{IM}
\crefname{IM}{IM}{IMs}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{Alexandre Pofelski \\
		macid: pofelska \\
		github: slimpotatoes}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
14/11/2017 & 1.0 & First draft \\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

The same Symbols, Abbreviations and Acronyms as in the SRS, the TestPlan and the MG (available in \href{https://github.com/slimpotatoes/STEM_Moire_GPA}{\progname{}} repository) are used in the Module Interface Specifications document. 

addition to document

\wss{Also add any additional symbols, abbreviations or acronyms}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for \progname{}. The full documentation and implementation can be found in \href{https://github.com/slimpotatoes/STEM_Moire_GPA}{\progname{}} repository.

\section{Notation}

\wss{You should describe your notation.  You can use what is below as
  a starting point.}

The structure of the MIS for modules comes from \cite{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\cite{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & an integer number \\
natural number & $\mathbb{N}$ & a natural number \\
real & $\mathbb{R}$ & a real number \\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname{} uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[H]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding Module} & ~ \\
\midrule

\multirow{10}{0.3\textwidth}{Behaviour-Hiding Module} & Input\\
& \progname{} Control \\
& \progname{} GUI \\
& User Input \\
& SMH simulation \\
& GPA \\
& Mask \\
& Unstrained region \\
& Conversion \\
& 2D strain tensor \\
\midrule

\multirow{6}{0.3\textwidth}{Software Decision Module} & Fourier Transform \\
& Least square fitting method \\
& Phase calculation \\
& Gradient \\
& Generic GUI/Plot \\
& Data structure \\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

LIST ALL MIS to refer them in other document

\newpage


\section{MIS of STEM Moir{\'e} GPA Control Module (\texorpdfstring{\cref{MG:M_Control}}))} \label{MIS_Control}

\subsection{Module}
main
\subsection{Uses}
\begin{itemize}
\item STEM Moir{\'e} GPA GUI
\item Processing modules \begin{itemize}
	\item Unstrained region 
	\item Conversion
	\item SMH Simulation
	\item GPA
	\item 2D Strain Tensors
\end{itemize}
\item Input
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
main & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\progname{} is designed to have the different steps of the process flow driven by user directly through GUI{\_}SMG. The STEM Moir{\'e} GPA Control Module uses the events in STEM Moi{\'e} GPA GUI to use the processing modules in the order defined by the user.

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent main():
\begin{itemize}
\item transition: A reflechir 

GUI():
\noindent\textit{{\#} Software permanently running until user abort it by closing the GUI} \medskip

$(\text{event{\_}Input()} \\ \rightarrow \text{Get the path pathISMH and pathIC from the user} \  \wedge \\ \text{load{\_}files(pathISMH,pathIC)})$\\
$(\text{event{\_}SimSMH()} \rightarrow \text{SMHsim}())$\\
$(\text{event{\_}GPA()} \rightarrow \text{gpa}())$\\
$(\text{event{\_}URef()} \rightarrow \text{ZeroStrain}())$\\
$(\text{event{\_}Conversion()} \rightarrow \text{conversion}())$\\
$(\text{event{\_}StrainCalc()} \rightarrow \text{CalcStrain}())$\\

\end{itemize}

\section{MIS of STEM Moir{\'e} GPA GUI Module (\texorpdfstring{\cref{MG:M_GUISMG}}))} \label{MIS_GUISMG}

\subsection{Module}
GUI{\_}SMG
\subsection{Uses}
\begin{itemize}
\item Generic GUI/Plot
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
GUI & - & - & - \\
event{\_}Input() & - & - & - \\
event{\_}SMHSim() & - & - & - \\
event{\_}GPA() & - & - & - \\
event{\_}URef() & - & - & - \\
event{\_}StrainCalc() & - & - & - \\
GUI{\_}Mask & - & - & - \\
GUI{\_}U & - & - & - \\
GUI{\_}nm & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\progname{} process flow is driven by user through GUI{\_}SMG. User triggers the events that start the selected processing step. 

\subsubsection{State Variables}

Win{\_}Flow: Window with the following buttons triggering events: button{\_}Input, button{\_}SMHSim, button{\_}GPA, button{\_}URef, button{\_}StrainCalc.

Win{\_}SMHSim: Window with areas to display $\widetilde{I}_{\mathit{SMH}_{\text{exp}}}$ and $\widetilde{I}_{\mathit{SMH}_{\text{sim}}}$

Win{\_}Phase: Window with areas to display $\Delta \overrightarrow{g}^{M_{\text{exp}}}$ and let the user input the variable $U$

Win{\_}FTSMH: Window with areas to display Window with areas to display $\widetilde{I}_{\mathit{SMH}_{\text{exp}}}$ and let the user input the variable.

Win{\_}Conv: Window with entry field to get $n$ and $m$ from the user


\subsubsection{Access Routine Semantics}

\noindent GUI():
\begin{itemize}
\item transition: Win{\_}Flow displayed 
\end{itemize}

\noindent event{\_}Input():
\begin{itemize}
\item transition: Trigger event{\_}Input when button{\_}Input pressed
\end{itemize}

\noindent event{\_}SMHSim():
\begin{itemize}
\item transition: Trigger event{\_}SMHSim when button{\_}SMHSim pressed
\end{itemize}

\noindent event{\_}GPA():
\begin{itemize}
\item transition: Trigger event{\_}GPA when button{\_}GPA pressed
\end{itemize}

\noindent event{\_}URef():
\begin{itemize}
\item transition: Trigger event{\_}URef when button{\_}URef pressed
\end{itemize}

\noindent event{\_}StrainCalc():
\begin{itemize}
\item transition: Trigger event{\_}StrainCalc when button{\_}StrainCalc press
\end{itemize} 

\noindent event{\_}GUI{\_}Mask():
\begin{itemize}
\item transition: Trigger event{\_}StrainCalc when button{\_}StrainCalc press
\end{itemize}

\noindent event{\_}GUI{\_}U():
\begin{itemize}
\item transition: Trigger event{\_}StrainCalc when button{\_}StrainCalc press
\end{itemize} 

\noindent event{\_}GUI{\_}nm():
\begin{itemize}
\item transition: Trigger event{\_}StrainCalc when button{\_}StrainCalc press
\end{itemize}  

\section{MIS of Input Module (\texorpdfstring{\cref{MG:M_InputFormat}}))} \label{MIS_Input}

\subsection{Module}
Input
\subsection{Uses}
\begin{itemize}
\item STEM Moi{\'e} GPA GUI
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
load{\_}files & string & - & FilePath \\
load{\_}mask & GUI object & - & NoMask \\
load{\_}U & GUI object & - & NoU \\
load{\_}nm & GUI object & - & NoConv \\
$I_{\mathit{SMH}_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}$ & - \\
$p$ & - & $\mathbb{R}^{+*}$ & - \\
$I_{C_{\text{ref}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}$ & - \\
$p_{\text{ref}}$ & - & $\mathbb{R}^{+*}$ & - \\
$U$ & - & - & - \\
$M$ & - & $(x_c,y_c) \in \mathbb{R}^2$ , $R \in \mathbb{R}^{+*}$ & - \\
$n$ & - & $\mathbb{Z}$ & - \\
$m$ & - & $\mathbb{Z}$ & - \\

\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\noindent For \cref{SRS:R_1} and \cref{SRS:IM_1} in the SRS document,\\
\noindent$I_{\mathit{SMH}_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}$ \\
$p$ : $\mathbb{R}^{+*}$\\
$I_{C_{\text{ref}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}$\\
$p_{\text{ref}}$ : $\mathbb{R}^{+*}$ \\

\noindent For \cref{SRS:R_5} and \cref{SRS:IM_2} in the SRS document,\\
\noindent$M$ : $(x_c,y_c) \in \mathbb{R}^2$ , $R \in \mathbb{R}^{+*}$\\

\noindent For \cref{SRS:R_8} and \cref{SRS:IM_3} in the SRS document,\\
\noindent$U$ :\\ 

\noindent For \cref{SRS:R_11} and For \cref{SRS:IM_4} in the SRS document,\\
\noindent$n$ : $\mathbb{Z}$\\
$m$ : $\mathbb{Z}$\\

\subsubsection{Access Routine Semantics}

\noindent load{\_}files(pathISMH,pathIC):
\begin{itemize}
\item transition: pathISMH and pathIC are the file paths for the input files. The following procedure is performed:
\begin{enumerate}
\item The .dm3 files are read and their respective  metafiles are collected.
\item From the metafile, $I_{\mathit{SMH}_{\text{exp}}}$, $I_{C_{\text{ref}}}$, $p$ and $p_{\text{ref}}$ are extracted to modify their respective state variable.
\item 
\item The variables $I_{\mathit{SMH}_{\text{exp}}}$, $I_{C_{\text{ref}}}$, $p$ and $p_{\text{ref}}$ are stored in the data structure using the access program store 
\end{enumerate}  
\item output:  $I_{\mathit{SMH}_{\text{exp}}}$, $I_{C_{\text{ref}}}$, $p$, $p_{\text{ref}}$ 
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of SMH Simulation (\texorpdfstring{\cref{MG:M_SMHSim}}))} \label{MIS_SHMSim}

\subsection{Module}
SMHSimCalc
\subsection{Uses}
\begin{itemize}
\item Fourier Transform
\item Input
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
SMHsim & $I_{\mathit{SMH}_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R} $ $ I_{C_{\text{ref}}}:\mathbb{R}^2\rightarrow\mathbb{R}$ , $p \in \mathbb{R}^{+*}$ , $p_{\text{ref}} \in \mathbb{R}^{+*}$ & $\widetilde{I}_{\mathit{SMH}_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{C}$ $\widetilde{I}_{\mathit{SMH}_{\text{sim}}}:\mathbb{R}^2\rightarrow\mathbb{C}$ $N_{\text{lim}} \in \mathbb{N}^{*}$ & Nlim.zero() \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
None
\subsubsection{Access Routine Semantics}
%Add event from INPUT
\noindent SMHsim($I_{\mathit{SMH}_{\text{exp}}},I_{C_{\text{ref}}}, p, p_{\text{ref}}$):
\begin{itemize} 
\item output: 
	\begin{itemize}
	\item $\widetilde{I}_{\mathit{SMH}_{\text{exp}}}$ such that
	\begin{equation*}
	\widetilde{I}_{\mathit{SMH}_{\text{exp}}}(\vec{\nu})=\mathcal{FT}[I_{\mathit{SMH}_{\text{exp}}}(\vec{r})]
	\end{equation*}
	\item $\widetilde{I}_{\mathit{SMH}_{\text{sim}}}$ such that
	\begin{equation*}
	\begin{gathered}
	\widetilde{I}_{\mathit{SMH}_{\text{sim}}}(\vec{\nu})=\frac{1}{p^2}\sum_{\vec{q}\in Q_{lim}}\mathcal{FT}[I_{C_{\text{ref}}}(\vec{\nu}-\frac{\vec{q}}{p})] \\
	\text{with } Q_{\text{lim}}=\{\forall (n,m) \in \mathbb{Z}^{2}\cap[-N_{\text{lim}},N_{\text{lim}}]^2, \ \vec{q}=n\vec{u_x}+m\vec{u_y}\} \\
	\text{and } N_{\text{lim}}=\Xi(\frac{p}{p_{\text{ref}}}) \text{ with } \Xi \text{ the floor function } 
	\end{gathered}
	\end{equation*}
	\end{itemize}
\item exception:
\end{itemize}

\section{MIS of GPA Module (\texorpdfstring{\cref{MG:M_GPA}}))} \label{MIS_GPA}

\subsection{Module}
GPACalc
\subsection{Uses}
\begin{itemize}
\item Mask
\item Fourier Transform
\item Phase
\item Gradient
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
gpa & $\widetilde{I}_{\mathit{SMH}_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{C}$ , $M:\mathbb{R}^2\rightarrow\mathbb{R}$ , $\overrightarrow{g_0} :\mathbb{R}^2\rightarrow\mathbb{R}$ & $P_{\vec{g}}:\mathbb{R}^2\rightarrow\mathbb{R}$ , $\overrightarrow{\Delta g}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ , $P_{\Delta \vec{g}}:\mathbb{R}^2\rightarrow\mathbb{R}$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent gpa($\widetilde{I}_{\mathit{SMH}_{\text{exp}}},M,\overrightarrow{g_0}$):
\begin{itemize} 
\item output: 
\begin{itemize}
	\item $P_{\vec{g}}$ such that
	\begin{equation*}
	\forall \vec{r} \in \mathbb{R}^2, \ P_{\vec{g}}(\vec{r})=\text{arg}(i\mathcal{FT}[M\times\widetilde{I}_{\mathit{SMH}_{\text{exp}}}])
	\end{equation*}
	\item $\overrightarrow{\Delta g}$ such that
	\begin{equation*}
	\forall \vec{r} \in \mathbb{R}^2, \ \Delta \overrightarrow{g}(\vec{r})=\frac{1}{2\pi}\text{grad}(\text{unwrap}(P_{\vec{g}}(\vec{r})))-\overrightarrow{g_0}(\vec{r})
	\end{equation*}
	\item $P_{\Delta \vec{g}}$ such that
	\begin{equation*}
	\forall \vec{r} \in \mathbb{R}^2, \ P_{\Delta \vec{g}}(\vec{r})=\text{wrap}(\text{unwrap}[P_{\vec{g}}(\vec{r})]-2\pi\overrightarrow{g_0}(\vec{0})\cdot \vec{r})
	\end{equation*}
\end{itemize}
\item exception:  
\end{itemize}

\section{MIS of Mask Module (\texorpdfstring{\cref{MG:M_Mask}}))} \label{MIS_Mask}

\subsection{Module}
Mask
\subsection{Uses}
\begin{itemize}
\item Input
\item Data structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
MCirc & $(x_c,y_c) \in \mathbb{N}^2$ , $R \in \mathbb{R}^{+*}$ & $M:\mathbb{R}^2\rightarrow\mathbb{R}$, $\overrightarrow{g_0} :\mathbb{R}^2\rightarrow\mathbb{R}^2$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent MaskGene($x_c,y_c,R$):
\begin{itemize} 
\item output: 
	\begin{itemize}
	\item $M$ such that
	\begin{equation*}
	M(x,y)=\begin{cases}
	1, \ (x-x_c)^2+(y-y_c)^2\leq R^2 \\
	0, \ (x-x_c)^2+(y-y_c)^2> R^2
	\end{cases}
	\end{equation*}
	\item $\overrightarrow{g_0}$ such that
	\begin{equation*}
	\forall \vec{r} \in \mathbb{R}^2, \ \overrightarrow{g_0}(\vec{r})=\begin{bmatrix}
	x_c\\
	y_c
	\end{bmatrix}
	\end{equation*}
	\end{itemize}
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Unstrained region (\texorpdfstring{\cref{MG:M_URef}}))} \label{MIS_URef}

\subsection{Module}
URefCalc
\subsection{Uses}
\begin{itemize}
\item Least Square Fit
\item Input
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
ZeroStrain & $\overrightarrow{\Delta g}^M:\mathbb{R}^2\rightarrow\mathbb{R}^2$, $bla$  & $\overrightarrow{\Delta g}^M:\mathbb{R}^2\rightarrow\mathbb{R}^2$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Conversion Module (\texorpdfstring{\cref{MG:M_MtoCConv}}))} \label{MIS_MtoCConv}

\subsection{Module}
MtoCConv
\subsection{Uses}
\begin{itemize}
\item Input
\item Data Structure
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
conversion & $p \in \mathbb{R}$ , $(n,m) \in \mathbb{N}^2$, $\overrightarrow{g}_{\text{uns}}^{M_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ & $\overrightarrow{g_{j}}_{uns}^{C_{exp}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent conversion($p,\overrightarrow{g}_{\text{uns}}^{M_{\text{exp}}}$):
\begin{itemize}
\item output: $\overrightarrow{g}_{\text{uns}}^{M_{\text{exp}}}$ such that
	\begin{equation*}
	\forall \vec{r} \in \mathbb{R}^2, \
	\overrightarrow{g_{j}}_{\text{uns}}^{C_{\text{exp}}}(\vec{r})= \overrightarrow{g_{j}}_{\text{uns}}^{M_{\text{exp}}}(\vec{r}) + p \times \begin{bmatrix}
	n \\
	m
	\end{bmatrix}
	\end{equation*}
\item exception:  
\end{itemize}

\section{MIS of 2D Strain Tensor Module (\texorpdfstring{\cref{MG:M_StrainCalc}}))} \label{MIS_StrainCalc}

\subsection{Module}
2D{\_}Strain
\subsection{Uses}
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
CalcStrain & $g_{1_{{\text{uns}}}}^{C_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ , $g_{2_{{\text{uns}}}}^{C_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ , $\Delta g_{1_{{\text{uns}}}}^{C_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$ , $\Delta g_{2_{{\text{uns}}}}^{C_{\text{exp}}}:\mathbb{R}^2\rightarrow\mathbb{R}^2$  & $T:\mathbb{R}^2\rightarrow\mathbb{R}^4$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent CalcStrain($g_{1_{{\text{uns}}}}^{C_{\text{exp}}},g_{2_{{\text{uns}}}}^{C_{\text{exp}}},\Delta g_{1_{{\text{uns}}}}^{C_{\text{exp}}},\Delta g_{2_{{\text{uns}}}}^{C_{\text{exp}}}$):
\begin{itemize}
\item output:  
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Fourier Transform Module (\texorpdfstring{\cref{MG:M_FT}}))} \label{MIS_FT}
\textit{{\#} 2D Fourier transform}
\subsection{Module}
FTCalc
\subsection{Uses}
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
$\mathcal{FT}$ & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & $f:\mathbb{R}^2\rightarrow\mathbb{C}$ & - \\
i$\mathcal{FT}$ & $f:\mathbb{R}^2\rightarrow\mathbb{C}$ & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
None

\subsubsection{Access Routine Semantics}

\noindent\textit{{\#} Calculate the 2D Fourier transform of a function $f$} \medskip

\noindent $\mathcal{FT}$($f(x,y)$):
\begin{itemize} 
\item output: $\widetilde{f}(\nu,\mu)$ such that 
\begin{equation*}
\forall (\nu,\mu) \in \mathbb{R}^2 \wedge \forall (x,y) \in \mathbb{R}^2, \ \widetilde{f}(\nu,\mu)=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}f(x,y)e^{-2i\pi(\nu x+\mu y)}dxdy
\end{equation*}
\item exception: \wss{if appropriate} 
\end{itemize}

\noindent\textit{{\#} Calculate the 2D inverse Fourier transform of a function $\widetilde{f}$}\medskip

\noindent i$\mathcal{FT}$($\widetilde{f}(\nu,\mu)$):
\begin{itemize} 
\item output: $f(x,y)$ such that 
\begin{equation*}
\forall (x,y) \in \mathbb{R}^2 \wedge \forall (\nu,\mu) \in \mathbb{R}^2 , \ f(x,y)=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}\widetilde{f}(\nu,\mu)e^{2i\pi(\nu x+\mu y)}dxdy
\end{equation*}
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Gradient Module (\texorpdfstring{\cref{MG:M_Gradient}}))} \label{MIS_Gradient}

\textit{{\#} 2D Gradient} \medskip

\subsection{Module}
GradCalc
\subsection{Uses}
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
grad & $f:\mathbb{R}^2\rightarrow\mathbb{R}$  & $f:\mathbb{R}^2\rightarrow\mathbb{R}^2$ & -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent\textit{{\#} Calculate the gradient of a 2D function $f$} \medskip

\noindent grad($f$):
\begin{itemize} 
\item output:$ \nabla f(x,y)$ such that
\begin{equation*}
\forall (x,y) \in \mathbb{R}^2, \ \nabla f(x,y) = \begin{bmatrix}
\frac{\partial f}{\partial x}(x,y) \\
\frac{\partial f}{\partial y}(x,y)
\end{bmatrix}
\end{equation*}
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Least Square Fit Method Module (\texorpdfstring{\cref{MG:M_LSFM}}))} \label{MIS_LSFM}

\textit{{\#} 2D linear least square method to fit a function $f$} \medskip

\subsection{Module}
LSFMCalc
\subsection{Uses}
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
lsfm & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent\textit{{\#} Calculate the 2D fit of a function $f$ using the linear least square method on a domain $U=([x_0,x_1];[y_0,y_1]) \in \mathbb{R}^2$} \medskip

\noindent lsfm(f,U):
\begin{itemize}
\item output: $fit(x,y)=ax + by$ such that
\begin{equation*}
\begin{gathered}
\forall (x,y) \in U, \ E(a,b)=\int_{x_0}^{x_1}\int_{y_0}^{y_1}[f(x,y)-fit(x,y)]^2dxdy \ \ \text{is minimized} \\
\Rightarrow \frac{\partial E}{\partial a} =0 \wedge \frac{\partial E}{\partial b} =0
\Rightarrow a = \frac{\int_{x_0}^{x_1}\int_{y_0}^{y_1}xf(x,y)dxdy}{\int_{x_0}^{x_1}\int_{y_0}^{y_1}x^2dxdy} \wedge  b= \frac{\int_{x_0}^{x_1}\int_{y_0}^{y_1}yf(x,y)dxdy}{\int_{x_0}^{x_1}\int_{y_0}^{y_1}y^2dxdy}
\end{gathered}
\end{equation*}
\item exception: \wss{if appropriate} 
\end{itemize}


\section{MIS of Phase Operation Module (\texorpdfstring{\cref{MG:M_Phase}}))} \label{MIS_Phase}

\subsection{Module}
PhaseCalc
\subsection{Uses}
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
unwrap & $f:\mathbb{R}^2\rightarrow]-\pi,\pi]$ & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & - \\
wrap & $f:\mathbb{R}^2\rightarrow\mathbb{R}$ & $f:\mathbb{R}^2\rightarrow]-\pi,\pi]$ & - \\
arg & $z \in \mathbb{C}$ & $\phi \in ]-\pi,\pi]$ & \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent wrap($f$):
\begin{itemize} 
\item output: $g$ such that
\begin{equation*}
\forall (x,y) \in \mathbb{R}^2, \exists k \in \mathbb{Z} | g(x,y) =f(x,y)+ 2k\pi \wedge g(x,y) \in ]-\pi,\pi]
\end{equation*} 
\item exception:
\end{itemize}

\noindent unwrap($f$):
\begin{itemize} 
\item output: $g$ such that
\begin{equation*}
\begin{gathered}
\forall (x,y) \in \mathbb{R}^2, \exists k \in \mathbb{Z} | g(x,y) =f(x,y) + 2k\pi \wedge g \ \text{is} \  \text{continous}\\
\Rightarrow \forall (x,y) \in \mathbb{R}^2, \exists k \in \mathbb{Z} | \lim_{(x,y)\to (x_0,y_0)} g(x,y) = g(x_0,y_0) = f(x_0,y_0) + 2k\pi
\end{gathered}
\end{equation*}
\item exception:
\end{itemize}

\noindent arg($z$):
\begin{itemize} 
\item output: $\phi$ such that
\begin{equation*}
\phi=\text{arg}(z)=\text{atan2}(z)=\text{atan2}(\frac{\text{Im(z)}}{\text{Re(z)}})
\end{equation*}
\item exception:
\end{itemize}


\section{MIS of Data Structure Module (\texorpdfstring{\cref{MG:M_DataStruct}}))} \label{MIS_DataStruct}

\subsection{Module}
DataStruct
\subsection{Uses}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
store & - & - & - \\
read & - & - & - \\
load{\_}FT{\_}SMH{\_}exp & datastruct & - & - \\
load{\_}$\Delta$g{\_}moire & datastruct & - & - \\
load{\_}g{\_}mask{\_}moire & datastruct & - & - \\
load{\_}g{\_}uns{\_}moire & datastruct & - & - \\
load{\_}$\Delta$g{\_}moire{\_}cor & datastruct & - & - \\
$\widetilde{I}_{\mathit{SMH}_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{C}$ & - \\
$\Delta \overrightarrow{g}^{M_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\overrightarrow{g}^{M_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\overrightarrow{g}_{\text{uns}}^{M_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\Delta\overrightarrow{g}_{\text{cor}}^{M_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\overrightarrow{g}_{1_{\text{uns}}}^{C_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\overrightarrow{g}_{2_{\text{uns}}}^{C_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\Delta \overrightarrow{g}_{1_{\text{uns}}}^{C_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
$\Delta \overrightarrow{g}_{2_{\text{uns}}}^{C_{\text{exp}}}$ & - & $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$ & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

bla \\
$\widetilde{I}_{\mathit{SMH}_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{C}$ \\
$\Delta \overrightarrow{g}^{M_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\overrightarrow{g}^{M_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\overrightarrow{g}_{\text{uns}}^{M_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\Delta\overrightarrow{g}_{\text{cor}}^{M_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\overrightarrow{g}_{1_{\text{uns}}}^{C_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\overrightarrow{g}_{2_{\text{uns}}}^{C_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\Delta \overrightarrow{g}_{1_{\text{uns}}}^{C_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\
$\Delta \overrightarrow{g}_{2_{\text{uns}}}^{C_{\text{exp}}}$ : $f:\mathbb{N}^2\rightarrow\mathbb{R}^2$\\

\subsubsection{Access Routine Semantics}

\noindent store():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}

\section{MIS of Generic GUI/Plot Module (\texorpdfstring{\cref{MG:M_GUIGene}}))} \label{MIS_GUIGene}

\subsection{Module}
GUIGene
\subsection{Uses}
Hardware-Hiding
Data Structure
\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\wss{accessProg} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}


\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}


\newpage

\bibliographystyle{ieeetr}
\bibliography{MG}

\newpage

\section{Appendix} \label{Appendix}

\wss{Extra information if required}

\end{document}